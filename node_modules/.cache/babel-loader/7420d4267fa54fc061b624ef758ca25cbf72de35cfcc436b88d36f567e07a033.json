{"ast":null,"code":"import { uuid, toArray } from './util';\nfunction formatCSSText(style) {\n  const content = style.getPropertyValue('content');\n  return `${style.cssText} content: '${content.replace(/'|\"/g, '')}';`;\n}\nfunction formatCSSProperties(style) {\n  return toArray(style).map(name => {\n    const value = style.getPropertyValue(name);\n    const priority = style.getPropertyPriority(name);\n    return `${name}: ${value}${priority ? ' !important' : ''};`;\n  }).join(' ');\n}\nfunction getPseudoElementStyle(className, pseudo, style) {\n  const selector = `.${className}:${pseudo}`;\n  const cssText = style.cssText ? formatCSSText(style) : formatCSSProperties(style);\n  return document.createTextNode(`${selector}{${cssText}}`);\n}\nfunction clonePseudoElement(nativeNode, clonedNode, pseudo) {\n  const style = window.getComputedStyle(nativeNode, pseudo);\n  const content = style.getPropertyValue('content');\n  if (content === '' || content === 'none') {\n    return;\n  }\n  const className = uuid();\n  try {\n    clonedNode.className = `${clonedNode.className} ${className}`;\n  } catch (err) {\n    return;\n  }\n  const styleElement = document.createElement('style');\n  styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n  clonedNode.appendChild(styleElement);\n}\nexport function clonePseudoElements(nativeNode, clonedNode) {\n  clonePseudoElement(nativeNode, clonedNode, ':before');\n  clonePseudoElement(nativeNode, clonedNode, ':after');\n}","map":{"version":3,"names":["uuid","toArray","formatCSSText","style","content","getPropertyValue","cssText","replace","formatCSSProperties","map","name","value","priority","getPropertyPriority","join","getPseudoElementStyle","className","pseudo","selector","document","createTextNode","clonePseudoElement","nativeNode","clonedNode","window","getComputedStyle","err","styleElement","createElement","appendChild","clonePseudoElements"],"sources":["C:\\Users\\nguye\\receipt-app\\node_modules\\html-to-image\\src\\clone-pseudos.ts"],"sourcesContent":["import { uuid, toArray } from './util'\n\ntype Pseudo = ':before' | ':after'\n\nfunction formatCSSText(style: CSSStyleDeclaration) {\n  const content = style.getPropertyValue('content')\n  return `${style.cssText} content: '${content.replace(/'|\"/g, '')}';`\n}\n\nfunction formatCSSProperties(style: CSSStyleDeclaration) {\n  return toArray<string>(style)\n    .map((name) => {\n      const value = style.getPropertyValue(name)\n      const priority = style.getPropertyPriority(name)\n\n      return `${name}: ${value}${priority ? ' !important' : ''};`\n    })\n    .join(' ')\n}\n\nfunction getPseudoElementStyle(\n  className: string,\n  pseudo: Pseudo,\n  style: CSSStyleDeclaration,\n): Text {\n  const selector = `.${className}:${pseudo}`\n  const cssText = style.cssText\n    ? formatCSSText(style)\n    : formatCSSProperties(style)\n\n  return document.createTextNode(`${selector}{${cssText}}`)\n}\n\nfunction clonePseudoElement<T extends HTMLElement>(\n  nativeNode: T,\n  clonedNode: T,\n  pseudo: Pseudo,\n) {\n  const style = window.getComputedStyle(nativeNode, pseudo)\n  const content = style.getPropertyValue('content')\n  if (content === '' || content === 'none') {\n    return\n  }\n\n  const className = uuid()\n  try {\n    clonedNode.className = `${clonedNode.className} ${className}`\n  } catch (err) {\n    return\n  }\n\n  const styleElement = document.createElement('style')\n  styleElement.appendChild(getPseudoElementStyle(className, pseudo, style))\n  clonedNode.appendChild(styleElement)\n}\n\nexport function clonePseudoElements<T extends HTMLElement>(\n  nativeNode: T,\n  clonedNode: T,\n) {\n  clonePseudoElement(nativeNode, clonedNode, ':before')\n  clonePseudoElement(nativeNode, clonedNode, ':after')\n}\n"],"mappings":"AAAA,SAASA,IAAI,EAAEC,OAAO,QAAQ,QAAQ;AAItC,SAASC,aAAaA,CAACC,KAA0B;EAC/C,MAAMC,OAAO,GAAGD,KAAK,CAACE,gBAAgB,CAAC,SAAS,CAAC;EACjD,OAAO,GAAGF,KAAK,CAACG,OAAO,cAAcF,OAAO,CAACG,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI;AACtE;AAEA,SAASC,mBAAmBA,CAACL,KAA0B;EACrD,OAAOF,OAAO,CAASE,KAAK,CAAC,CAC1BM,GAAG,CAAEC,IAAI,IAAI;IACZ,MAAMC,KAAK,GAAGR,KAAK,CAACE,gBAAgB,CAACK,IAAI,CAAC;IAC1C,MAAME,QAAQ,GAAGT,KAAK,CAACU,mBAAmB,CAACH,IAAI,CAAC;IAEhD,OAAO,GAAGA,IAAI,KAAKC,KAAK,GAAGC,QAAQ,GAAG,aAAa,GAAG,EAAE,GAAG;EAC7D,CAAC,CAAC,CACDE,IAAI,CAAC,GAAG,CAAC;AACd;AAEA,SAASC,qBAAqBA,CAC5BC,SAAiB,EACjBC,MAAc,EACdd,KAA0B;EAE1B,MAAMe,QAAQ,GAAG,IAAIF,SAAS,IAAIC,MAAM,EAAE;EAC1C,MAAMX,OAAO,GAAGH,KAAK,CAACG,OAAO,GACzBJ,aAAa,CAACC,KAAK,CAAC,GACpBK,mBAAmB,CAACL,KAAK,CAAC;EAE9B,OAAOgB,QAAQ,CAACC,cAAc,CAAC,GAAGF,QAAQ,IAAIZ,OAAO,GAAG,CAAC;AAC3D;AAEA,SAASe,kBAAkBA,CACzBC,UAAa,EACbC,UAAa,EACbN,MAAc;EAEd,MAAMd,KAAK,GAAGqB,MAAM,CAACC,gBAAgB,CAACH,UAAU,EAAEL,MAAM,CAAC;EACzD,MAAMb,OAAO,GAAGD,KAAK,CAACE,gBAAgB,CAAC,SAAS,CAAC;EACjD,IAAID,OAAO,KAAK,EAAE,IAAIA,OAAO,KAAK,MAAM,EAAE;IACxC;;EAGF,MAAMY,SAAS,GAAGhB,IAAI,EAAE;EACxB,IAAI;IACFuB,UAAU,CAACP,SAAS,GAAG,GAAGO,UAAU,CAACP,SAAS,IAAIA,SAAS,EAAE;GAC9D,CAAC,OAAOU,GAAG,EAAE;IACZ;;EAGF,MAAMC,YAAY,GAAGR,QAAQ,CAACS,aAAa,CAAC,OAAO,CAAC;EACpDD,YAAY,CAACE,WAAW,CAACd,qBAAqB,CAACC,SAAS,EAAEC,MAAM,EAAEd,KAAK,CAAC,CAAC;EACzEoB,UAAU,CAACM,WAAW,CAACF,YAAY,CAAC;AACtC;AAEA,OAAM,SAAUG,mBAAmBA,CACjCR,UAAa,EACbC,UAAa;EAEbF,kBAAkB,CAACC,UAAU,EAAEC,UAAU,EAAE,SAAS,CAAC;EACrDF,kBAAkB,CAACC,UAAU,EAAEC,UAAU,EAAE,QAAQ,CAAC;AACtD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}